<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexo Dash - Laborat√≥rio Virtual de Simula√ß√£o</title>
    <meta name="description" content="Ambiente de aprendizado imersivo para desenvolvimento Dash/Python">
    
    <!-- Estilos CSS principais -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* Canvas 3D que ocupar√° toda a tela */
        #threejs-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Tela de carregamento */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3a 50%, #0f0f23 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: #00ff88;
            text-align: center;
        }

        .loading-logo {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 2rem;
            text-shadow: 0 0 20px #00ff88;
            animation: pulse 2s ease-in-out infinite;
        }

        .loading-text {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            opacity: 0.8;
        }

        .loading-progress {
            width: 300px;
            height: 4px;
            background: rgba(0, 255, 136, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px #00ff88;
        }

        .loading-status {
            font-size: 1rem;
            opacity: 0.6;
            min-height: 1.5rem;
        }

        /* Pain√©is hologr√°ficos (inicialmente ocultos) */
        .holographic-panel {
            position: fixed;
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            padding: 2rem;
            color: #00ff88;
            font-size: 1.1rem;
            line-height: 1.6;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.2);
            z-index: 100;
            display: none;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .panel-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-align: center;
            text-shadow: 0 0 10px #00ff88;
        }

        .panel-content {
            margin-bottom: 1.5rem;
        }

        .panel-actions {
            text-align: center;
        }

        .holographic-button {
            background: rgba(0, 255, 136, 0.2);
            border: 2px solid #00ff88;
            color: #00ff88;
            padding: 0.8rem 2rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            text-transform: uppercase;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .holographic-button:hover {
            background: rgba(0, 255, 136, 0.4);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
            transform: translateY(-2px);
        }

        /* Responsividade */
        @media (max-width: 1024px) {
            .holographic-panel {
                max-width: 500px;
                right: 15px;
                font-size: 1rem;
                padding: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .loading-logo {
                font-size: 2rem;
            }
            
            .loading-text {
                font-size: 1.2rem;
            }
            
            .loading-progress {
                width: 250px;
            }
            
            .holographic-panel {
                left: 10px;
                right: 10px;
                top: 20px;
                bottom: 20px;
                max-width: none;
                max-height: none;
                padding: 1.5rem;
                font-size: 1rem;
                transform: none;
                overflow-y: auto;
            }
            
            .panel-title {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .loading-logo {
                font-size: 1.5rem;
            }
            
            .loading-text {
                font-size: 1rem;
            }
            
            .loading-progress {
                width: 200px;
            }
            
            .holographic-panel {
                padding: 1rem;
                font-size: 0.9rem;
                left: 5px;
                right: 5px;
                top: 10px;
                bottom: 10px;
            }
            
            .panel-title {
                font-size: 1.3rem;
            }
            
            .holographic-button {
                padding: 0.6rem 1.5rem;
                font-size: 0.9rem;
                margin: 0.3rem;
            }
        }

        /* Anima√ß√µes */
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px #00ff88; }
            50% { text-shadow: 0 0 30px #00ff88, 0 0 40px #00ccff; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            from { 
                opacity: 0; 
                transform: translateX(100px) translateY(-50%); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0) translateY(-50%); 
            }
        }

        .glow-animation {
            animation: glow 3s ease-in-out infinite;
        }

        .holographic-panel {
            animation: slideInRight 0.5s ease-out;
        }

        /* Estilos para c√≥digo */
        .code-block {
            background: #1a1a1a;
            padding: 1rem;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            border-left: 4px solid #00ff88;
            overflow-x: auto;
        }

        .code-block code {
            color: #00ff88;
        }

        /* Estilos para links */
        .holographic-panel a {
            color: #00ccff;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .holographic-panel a:hover {
            color: #00ff88;
            text-shadow: 0 0 10px #00ff88;
        }

        /* Badges de status */
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.6rem;
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid #00ff88;
            border-radius: 15px;
            font-size: 0.8rem;
            margin: 0.2rem;
        }

        /* Listas estilizadas */
        .holographic-panel ul {
            padding-left: 1.5rem;
        }

        .holographic-panel li {
            margin-bottom: 0.5rem;
            position: relative;
        }

        .holographic-panel li::marker {
            color: #00ff88;
        }

        /* Destacar elementos importantes */
        .highlight-box {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
        }

        /* Scroll customizado para o painel */
        .holographic-panel::-webkit-scrollbar {
            width: 8px;
        }

        .holographic-panel::-webkit-scrollbar-track {
            background: rgba(0, 255, 136, 0.1);
            border-radius: 4px;
        }

        .holographic-panel::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 136, 0.5);
            border-radius: 4px;
        }

        .holographic-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 136, 0.7);
        }

        /* Numera√ß√£o de passos */
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #00ff88;
            color: #000;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Tela de Carregamento -->
    <div id="loading-screen">
        <div class="loading-logo">NEXO DASH</div>
        <div class="loading-text">Carregando Laborat√≥rio Virtual...</div>
        <div class="loading-progress">
            <div class="loading-bar" id="loading-bar"></div>
        </div>
        <div class="loading-status" id="loading-status">Inicializando sistema...</div>
    </div>

    <!-- Container principal para three.js -->
    <div id="threejs-container"></div>

    <!-- Painel Hologr√°fico (inicialmente oculto) -->
    <div class="holographic-panel" id="main-panel">
        <div class="panel-title" id="panel-title">Bem-vindo ao Nexo Dash</div>
        <div class="panel-content" id="panel-content">
            Inicializando ambiente de simula√ß√£o...
        </div>
        <div class="panel-actions" id="panel-actions">
            <button class="holographic-button" id="continue-btn" onclick="nextStep()">
                Continuar
            </button>
        </div>
    </div>

    <!-- Inclus√£o das bibliotecas principais via CDN -->
    <!-- Three.js para renderiza√ß√£o 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- Pyodide para execu√ß√£o de Python no navegador -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    
    <!-- AutoTranslate.js v2.0.1 para internacionaliza√ß√£o -->
    <script src="https://cdn.jsdelivr.net/npm/auto-translate@2.0.1/dist/index.min.js"></script>

    <!-- Script principal da aplica√ß√£o -->
    <script>
        // Estado global da aplica√ß√£o
        const AppState = {
            pyodide: null,
            currentModule: 0,
            isInitialized: false,
            scene: null,
            camera: null,
            renderer: null,
            controls: null,
            animationId: null
        };

        // Configura√ß√£o do sistema de carregamento
        const LoadingSystem = {
            currentStep: 0,
            totalSteps: 5,
            steps: [
                'Inicializando sistema...',
                'Carregando three.js...',
                'Configurando ambiente 3D...',
                'Inicializando Pyodide...',
                'Carregando pacotes Python...'
            ],

            updateProgress(step, message = null) {
                this.currentStep = step;
                const progress = (step / this.totalSteps) * 100;
                const progressBar = document.getElementById('loading-bar');
                const statusText = document.getElementById('loading-status');
                
                progressBar.style.width = progress + '%';
                statusText.textContent = message || this.steps[step] || 'Carregando...';
            },

            hide() {
                const loadingScreen = document.getElementById('loading-screen');
                loadingScreen.style.opacity = '0';
                loadingScreen.style.transition = 'opacity 1s ease-out';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 1000);
            }
        };

        // Sistema de renderiza√ß√£o 3D
        const ThreeJSSystem = {
            init() {
                return new Promise((resolve) => {
                    try {
                        LoadingSystem.updateProgress(1, 'Carregando three.js...');
                        
                        // Criar cena
                        AppState.scene = new THREE.Scene();
                        AppState.scene.background = new THREE.Color(0x0a0a1a);

                        // Configurar c√¢mera
                        const aspect = window.innerWidth / window.innerHeight;
                        AppState.camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 1000);
                        AppState.camera.position.set(0, 5, 10);

                        // Criar renderizador
                        AppState.renderer = new THREE.WebGLRenderer({ antialias: true });
                        AppState.renderer.setSize(window.innerWidth, window.innerHeight);
                        AppState.renderer.shadowMap.enabled = true;
                        AppState.renderer.shadowMap.type = THREE.PCFSoftShadowMap;

                        // Adicionar renderizador ao DOM
                        const container = document.getElementById('threejs-container');
                        container.appendChild(AppState.renderer.domElement);

                        LoadingSystem.updateProgress(2, 'Configurando ambiente 3D...');

                        // Configurar ilumina√ß√£o
                        const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
                        AppState.scene.add(ambientLight);

                        const directionalLight = new THREE.DirectionalLight(0x00ff88, 1);
                        directionalLight.position.set(10, 10, 5);
                        directionalLight.castShadow = true;
                        directionalLight.shadow.mapSize.width = 2048;
                        directionalLight.shadow.mapSize.height = 2048;
                        AppState.scene.add(directionalLight);

                        // Configurar controles de √≥rbita
                        AppState.controls = new THREE.OrbitControls(AppState.camera, AppState.renderer.domElement);
                        AppState.controls.enableDamping = true;
                        AppState.controls.dampingFactor = 0.05;
                        AppState.controls.maxPolarAngle = Math.PI / 2;

                        // Criar geometria inicial (plataforma do laborat√≥rio)
                        this.createLaboratoryPlatform();

                        // Configurar responsividade
                        window.addEventListener('resize', this.onWindowResize.bind(this));

                        // Iniciar loop de anima√ß√£o
                        this.animate();

                        resolve();
                    } catch (error) {
                        console.error('Erro ao inicializar Three.js:', error);
                        resolve(); // Continuar mesmo com erro
                    }
                });
            },

            createLaboratoryPlatform() {
                // Criar plataforma circular hologr√°fica
                const platformGeometry = new THREE.CylinderGeometry(8, 8, 0.2, 32);
                const platformMaterial = new THREE.MeshLambertMaterial({
                    color: 0x00ff88,
                    transparent: true,
                    opacity: 0.3,
                    emissive: 0x004422
                });
                const platform = new THREE.Mesh(platformGeometry, platformMaterial);
                platform.position.y = -0.1;
                platform.receiveShadow = true;
                AppState.scene.add(platform);

                // Criar grid hologr√°fico
                const gridHelper = new THREE.GridHelper(16, 16, 0x00ff88, 0x00ff88);
                gridHelper.material.opacity = 0.2;
                gridHelper.material.transparent = true;
                AppState.scene.add(gridHelper);

                // Criar n√∫cleo central (ser√° usado nos m√≥dulos)
                const coreGeometry = new THREE.SphereGeometry(0.5, 32, 32);
                const coreMaterial = new THREE.MeshLambertMaterial({
                    color: 0x00ccff,
                    transparent: true,
                    opacity: 0.8,
                    emissive: 0x002244
                });
                const core = new THREE.Mesh(coreGeometry, coreMaterial);
                core.position.y = 2;
                core.name = 'laboratory-core';
                AppState.scene.add(core);
            },

            animate() {
                AppState.animationId = requestAnimationFrame(this.animate.bind(this));
                
                // Animar n√∫cleo central
                const core = AppState.scene.getObjectByName('laboratory-core');
                if (core) {
                    core.rotation.y += 0.01;
                    core.position.y = 2 + Math.sin(Date.now() * 0.001) * 0.2;
                }

                AppState.controls.update();
                AppState.renderer.render(AppState.scene, AppState.camera);
            },

            onWindowResize() {
                AppState.camera.aspect = window.innerWidth / window.innerHeight;
                AppState.camera.updateProjectionMatrix();
                AppState.renderer.setSize(window.innerWidth, window.innerHeight);
            }
        };

        // Sistema Pyodide para execu√ß√£o de Python
        const PyodideSystem = {
            async init() {
                try {
                    LoadingSystem.updateProgress(3, 'Inicializando Pyodide...');
                    
                    AppState.pyodide = await loadPyodide({
                        indexURL: "https://cdn.jsdelivr.net/pyodide/v0.24.1/full/"
                    });

                    LoadingSystem.updateProgress(4, 'Carregando pacotes Python...');

                    // Carregar pacotes essenciais
                    await AppState.pyodide.loadPackage([
                        'micropip',
                        'pandas',
                        'numpy'
                    ]);

                    // Instalar dash via micropip
                    const micropip = AppState.pyodide.pyimport('micropip');
                    await micropip.install([
                        'dash',
                        'plotly',
                        'dash-html-components',
                        'dash-core-components'
                    ]);

                    console.log('Pyodide inicializado com sucesso!');
                    return true;
                } catch (error) {
                    console.error('Erro ao inicializar Pyodide:', error);
                    LoadingSystem.updateProgress(4, 'Erro ao carregar Python (continuando...)');
                    return false;
                }
            },

            runCode(pythonCode) {
                if (!AppState.pyodide) {
                    console.error('Pyodide n√£o foi inicializado');
                    return null;
                }

                try {
                    return AppState.pyodide.runPython(pythonCode);
                } catch (error) {
                    console.error('Erro ao executar c√≥digo Python:', error);
                    return null;
                }
            }
        };

        // Sistema de Interface
        const UISystem = {
            showPanel(title, content, actions = []) {
                const panel = document.getElementById('main-panel');
                const titleEl = document.getElementById('panel-title');
                const contentEl = document.getElementById('panel-content');
                const actionsEl = document.getElementById('panel-actions');

                titleEl.textContent = title;
                contentEl.innerHTML = content;
                
                // Limpar a√ß√µes anteriores
                actionsEl.innerHTML = '';
                
                // Adicionar novas a√ß√µes
                actions.forEach(action => {
                    const button = document.createElement('button');
                    button.className = 'holographic-button';
                    button.textContent = action.label;
                    button.onclick = action.callback;
                    actionsEl.appendChild(button);
                });

                // Mostrar painel (CSS handle positioning)
                panel.style.display = 'block';
                
                // Scroll to top of panel content
                contentEl.scrollTop = 0;
            },

            hidePanel() {
                const panel = document.getElementById('main-panel');
                panel.style.display = 'none';
            }
        };

        // Sistema de M√≥dulos
        const ModuleSystem = {
            currentStep: 0,
            modules: [
                {
                    title: 'M√≥dulo 0: Calibra√ß√£o da Esta√ß√£o',
                    steps: [
                        {
                            title: 'Bem-vindo ao Nexo Dash',
                            content: `
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üß¨</div>
                                    <p><strong>Bem-vindo ao Laborat√≥rio Virtual Nexo Dash!</strong></p>
                                </div>
                                <p>Eu sou a <strong>Dra. Ana Turing</strong>, sua mentora nesta jornada de aprendizado.</p>
                                <p>Voc√™ foi recrutado para uma miss√£o importante: analisar fatores de risco de doen√ßas card√≠acas usando um dataset real do Kaggle.</p>
                                <p><strong>Sua miss√£o:</strong> Construir um dashboard profissional usando Python, Dash e as melhores pr√°ticas da ind√∫stria.</p>
                                <p>Vamos come√ßar calibrando sua esta√ß√£o de trabalho!</p>
                            `,
                            actions: [{ label: 'Aceitar Miss√£o', callback: () => ModuleSystem.nextStep() }]
                        },
                        {
                            title: 'Passo 1: Instala√ß√£o do VS Code',
                            content: `
                                <div style="background: rgba(0,100,100,0.2); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                                    <h4>üîß Configura√ß√£o do Ambiente</h4>
                                </div>
                                <p><strong>Visual Studio Code</strong> √© nosso editor principal. Se ainda n√£o tem instalado:</p>
                                <ol>
                                    <li>Acesse: <a href="https://code.visualstudio.com/" target="_blank" style="color: #00ccff;">https://code.visualstudio.com/</a></li>
                                    <li>Baixe a vers√£o para seu sistema operacional</li>
                                    <li>Execute a instala√ß√£o com as configura√ß√µes padr√£o</li>
                                    <li>Abra o VS Code ap√≥s a instala√ß√£o</li>
                                </ol>
                                <p><strong>Extens√µes recomendadas:</strong></p>
                                <ul>
                                    <li><strong>Python (Microsoft)</strong>: Suporte completo para Python</li>
                                    <li><strong>Ruff (Astral Software)</strong>: Linter e formatter super r√°pido</li>
                                    <li><strong>Error Lens</strong>: Mostra erros diretamente no c√≥digo</li>
                                    <li><strong>Data Wrangler (Microsoft)</strong>: Visualiza√ß√£o de dados CSV/Excel</li>
                                </ul>
                                <p><em>üí° Essas extens√µes transformar√£o seu VS Code numa IDE Python profissional!</em></p>
                            `,
                            actions: [
                                { label: 'VS Code Instalado', callback: () => ModuleSystem.nextStep() },
                                { label: 'J√° Tenho VS Code', callback: () => ModuleSystem.nextStep() }
                            ]
                        },
                        {
                            title: 'Passo 2: Instala√ß√£o do uv',
                            content: `
                                <div style="background: rgba(100,0,100,0.2); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                                    <h4>‚ö° Gerenciador de Pacotes Moderno</h4>
                                </div>
                                <p><strong>uv</strong> √© o gerenciador de pacotes Python mais r√°pido da atualidade (Astral).</p>
                                
                                <p><strong>Windows (PowerShell):</strong></p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
                                </div>
                                
                                <p><strong>macOS/Linux:</strong></p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    curl -LsSf https://astral.sh/uv/install.sh | sh
                                </div>
                                
                                <p><strong>Verificar instala√ß√£o:</strong></p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    uv --version
                                </div>
                                
                                <p><em>‚ö†Ô∏è Pode ser necess√°rio reiniciar o terminal ap√≥s a instala√ß√£o.</em></p>
                            `,
                            actions: [
                                { label: 'uv Instalado', callback: () => ModuleSystem.nextStep() }
                            ]
                        },
                        {
                            title: 'Passo 3: Cria√ß√£o do Projeto',
                            content: `
                                <div style="background: rgba(0,100,0,0.2); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                                    <h4>üèóÔ∏è Estrutura do Projeto</h4>
                                </div>
                                <p>Agora vamos criar a estrutura do nosso projeto de an√°lise card√≠aca:</p>
                                
                                <p><strong>1. Criar pasta do projeto:</strong></p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    mkdir dashboard-cardiaco<br>
                                    cd dashboard-cardiaco
                                </div>
                                
                                <p><strong>2. Inicializar projeto com uv:</strong></p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    uv init
                                </div>
                                
                                <p><strong>3. Abrir no VS Code:</strong></p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    code .
                                </div>
                                
                                <p>‚ú® O comando <code>uv init</code> criar√° automaticamente o arquivo <code>pyproject.toml</code> que √© o centro de controle do projeto!</p>
                            `,
                            actions: [
                                { label: 'Projeto Criado', callback: () => ModuleSystem.nextStep() }
                            ]
                        },
                        {
                            title: 'Passo 4: Instala√ß√£o de Depend√™ncias',
                            content: `
                                <div style="background: rgba(100,100,0,0.2); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                                    <h4>üì¶ Bibliotecas Essenciais</h4>
                                </div>
                                <p>Vamos instalar as bibliotecas que usaremos no dashboard:</p>
                                
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    uv add dash dash-mantine-components dash-chart-editor pandas plotly
                                </div>
                                
                                <p><strong>O que cada biblioteca faz:</strong></p>
                                <ul>
                                    <li><strong>dash</strong>: Framework principal para dashboards web</li>
                                    <li><strong>dash-mantine-components</strong>: Componentes UI modernos</li>
                                    <li><strong>dash-chart-editor</strong>: Editor visual de gr√°ficos</li>
                                    <li><strong>pandas</strong>: Manipula√ß√£o e an√°lise de dados</li>
                                    <li><strong>plotly</strong>: Cria√ß√£o de gr√°ficos interativos</li>
                                </ul>
                                
                                <p>üöÄ O uv resolver√° automaticamente todas as depend√™ncias e criar√° um ambiente virtual!</p>
                            `,
                            actions: [
                                { label: 'Depend√™ncias Instaladas', callback: () => ModuleSystem.nextStep() }
                            ]
                        },
                        {
                            title: 'Calibra√ß√£o Completa!',
                            content: `
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div>
                                    <p><strong>Esta√ß√£o de Trabalho Calibrada!</strong></p>
                                </div>
                                <p>Excelente trabalho! Sua esta√ß√£o est√° configurada com:</p>
                                <ul>
                                    <li>‚úÖ VS Code configurado</li>
                                    <li>‚úÖ uv instalado e funcionando</li>
                                    <li>‚úÖ Projeto inicializado</li>
                                    <li>‚úÖ Depend√™ncias instaladas</li>
                                </ul>
                                
                                <p><strong>Pr√≥ximo passo:</strong> Vamos carregar o blueprint do projeto e os dados que analisaremos!</p>
                                
                                <div style="background: rgba(0,255,136,0.1); padding: 1rem; border-radius: 5px; margin-top: 1rem;">
                                    <p><em>üí° Dica: Mantenha o VS Code aberto com seu projeto. Usaremos ele nos pr√≥ximos m√≥dulos!</em></p>
                                </div>
                            `,
                            actions: [
                                { label: 'Ir para M√≥dulo 1', callback: () => ModuleSystem.nextModule() }
                            ]
                        }
                    ]
                },
                {
                    title: 'M√≥dulo 1: Blueprint do Projeto',
                    steps: [
                        {
                            title: 'Carregando Blueprint do Projeto',
                            content: `
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üóÇÔ∏è</div>
                                    <p><strong>Arquitetura do Projeto</strong></p>
                                </div>
                                <p>Agora vou mostrar a estrutura profissional que seu projeto deve ter.</p>
                                <p>Observe a visualiza√ß√£o 3D que aparecer√° ao lado - cada pasta e arquivo tem sua fun√ß√£o espec√≠fica.</p>
                                <p><strong>Clique nos elementos 3D</strong> para ver suas descri√ß√µes!</p>
                            `,
                            actions: [
                                { label: 'Carregar Blueprint', callback: () => ModuleSystem.load3DBlueprint() }
                            ]
                        },
                        {
                            title: 'Estrutura de Pastas Profissional',
                            content: `
                                <div style="background: rgba(0,100,100,0.2); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                                    <h4>üèóÔ∏è Organiza√ß√£o Modular</h4>
                                </div>
                                <p>Esta √© a estrutura que implementaremos:</p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; font-size: 0.9rem;">
dashboard-cardiaco/<br>
‚îú‚îÄ‚îÄ app/<br>
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py<br>
‚îÇ   ‚îú‚îÄ‚îÄ models.py<br>
‚îÇ   ‚îú‚îÄ‚îÄ routers.py<br>
‚îÇ   ‚îú‚îÄ‚îÄ views.py<br>
‚îÇ   ‚îî‚îÄ‚îÄ static/<br>
‚îú‚îÄ‚îÄ data/<br>
‚îú‚îÄ‚îÄ utils/<br>
‚îú‚îÄ‚îÄ tests/<br>
‚îú‚îÄ‚îÄ main.py<br>
‚îî‚îÄ‚îÄ pyproject.toml
                                </div>
                                <p><strong>Benef√≠cios desta estrutura:</strong></p>
                                <ul>
                                    <li>C√≥digo organizado e f√°cil de manter</li>
                                    <li>Separa√ß√£o clara de responsabilidades</li>
                                    <li>Facilita trabalho em equipe</li>
                                    <li>Padr√£o da ind√∫stria</li>
                                </ul>
                            `,
                            actions: [
                                { label: 'Criar Estrutura', callback: () => ModuleSystem.nextStep() }
                            ]
                        },
                        {
                            title: 'Download do Dataset',
                            content: `
                                <div style="background: rgba(100,0,0,0.2); padding: 1rem; border-radius: 5px; margin-bottom: 1rem;">
                                    <h4>‚ù§Ô∏è Dados de Doen√ßas Card√≠acas</h4>
                                </div>
                                <p>Agora vamos baixar o dataset que analisaremos:</p>
                                
                                <p><strong>Dataset:</strong> Heart Disease Dataset (Kaggle)</p>
                                <p><strong>Conte√∫do:</strong> Dados cl√≠nicos de pacientes com fatores de risco card√≠aco</p>
                                
                                <p><strong>1. Criar pasta data:</strong></p>
                                <div style="background: #1a1a1a; padding: 1rem; border-radius: 5px; font-family: monospace; margin: 1rem 0;">
                                    mkdir data
                                </div>
                                
                                <p><strong>2. Download direto:</strong></p>
                                <a href="https://www.kaggle.com/api/v1/datasets/download/johnsmith88/heart-disease-dataset" 
                                   target="_blank" 
                                   style="color: #00ccff; text-decoration: none; background: rgba(0,200,255,0.2); padding: 0.5rem 1rem; border-radius: 5px; display: inline-block; margin: 1rem 0;">
                                    üì• Baixar Heart Disease Dataset
                                </a>
                                
                                <p><strong>3. Extrair para a pasta data/</strong></p>
                                <p><em>üí° O arquivo vir√° compactado (.zip). Extraia o CSV para dentro da pasta data/</em></p>
                            `,
                            actions: [
                                { label: 'Dataset Baixado', callback: () => ModuleSystem.nextStep() }
                            ]
                        },
                        {
                            title: 'Blueprint Carregado!',
                            content: `
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üéØ</div>
                                    <p><strong>Miss√£o Preparada!</strong></p>
                                </div>
                                <p>Perfeito! Agora temos tudo pronto:</p>
                                <ul>
                                    <li>‚úÖ Estrutura do projeto definida</li>
                                    <li>‚úÖ Dataset de doen√ßas card√≠acas baixado</li>
                                    <li>‚úÖ Arquitetura 3D visualizada</li>
                                    <li>‚úÖ Ambiente de desenvolvimento pronto</li>
                                </ul>
                                
                                <p><strong>Pr√≥ximos m√≥dulos:</strong> Constru√ß√£o iterativa do dashboard</p>
                                <ul>
                                    <li>M√≥dulo 2: N√∫cleo do servidor Dash</li>
                                    <li>M√≥dulo 3: Layout inicial</li>
                                    <li>M√≥dulo 4: Primeira visualiza√ß√£o</li>
                                    <li>M√≥dulo 5: Interatividade com callbacks</li>
                                    <li>E muito mais...</li>
                                </ul>
                                
                                <div style="background: rgba(0,255,136,0.1); padding: 1rem; border-radius: 5px; margin-top: 1rem;">
                                    <p><em>üöÄ Agora voc√™ tem uma base s√≥lida para construir dashboards profissionais!</em></p>
                                </div>
                            `,
                            actions: [
                                { label: 'Explorar Ambiente', callback: () => UISystem.hidePanel() },
                                { label: 'Ver Pr√≥ximos M√≥dulos', callback: () => ModuleSystem.showUpcomingModules() }
                            ]
                        }
                    ]
                }
            ],

            nextModule() {
                AppState.currentModule++;
                this.currentStep = 0;
                if (AppState.currentModule < this.modules.length) {
                    this.showCurrentStep();
                } else {
                    this.showUpcomingModules();
                }
            },

            nextStep() {
                this.currentStep++;
                const currentModule = this.modules[AppState.currentModule];
                if (this.currentStep < currentModule.steps.length) {
                    this.showCurrentStep();
                } else {
                    this.nextModule();
                }
            },

            showCurrentStep() {
                const currentModule = this.modules[AppState.currentModule];
                const currentStep = currentModule.steps[this.currentStep];
                UISystem.showPanel(currentStep.title, currentStep.content, currentStep.actions);
            },

            startFirstModule() {
                AppState.currentModule = 0;
                this.currentStep = 0;
                this.showCurrentStep();
            },

            load3DBlueprint() {
                console.log('Carregando blueprint 3D...');
                // Criar visualiza√ß√£o 3D da estrutura do projeto
                this.create3DProjectStructure();
                
                // Ajustar c√¢mera para mostrar melhor o blueprint
                this.focusCameraOnBlueprint();
                
                console.log('Blueprint 3D carregado, avan√ßando para pr√≥ximo passo...');
                this.nextStep();
            },

            focusCameraOnBlueprint() {
                // Salvar posi√ß√£o original da c√¢mera
                const originalPos = { 
                    x: AppState.camera.position.x, 
                    y: AppState.camera.position.y, 
                    z: AppState.camera.position.z 
                };
                
                // Posi√ß√£o otimizada para visualizar o blueprint
                const targetPos = { x: 6, y: 8, z: 10 };
                const targetLookAt = { x: 0, y: 2.5, z: 0 };
                
                const startTime = Date.now();
                const duration = 3000;
                
                // Adicionar ilumina√ß√£o especial para o blueprint
                this.addBlueprintLighting();
                
                const animate = () => {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // Easing suave
                    const easedProgress = 1 - Math.pow(1 - progress, 3);
                    
                    // Interpolar posi√ß√£o da c√¢mera
                    AppState.camera.position.x = originalPos.x + (targetPos.x - originalPos.x) * easedProgress;
                    AppState.camera.position.y = originalPos.y + (targetPos.y - originalPos.y) * easedProgress;
                    AppState.camera.position.z = originalPos.z + (targetPos.z - originalPos.z) * easedProgress;
                    
                    // Fazer c√¢mera olhar para o centro do blueprint
                    AppState.camera.lookAt(
                        targetLookAt.x,
                        targetLookAt.y,
                        targetLookAt.z
                    );
                    
                    // Atualizar controles
                    AppState.controls.target.set(targetLookAt.x, targetLookAt.y, targetLookAt.z);
                    AppState.controls.update();
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        // Adicionar movimento de c√¢mera orbital suave
                        this.addCameraOrbit();
                    }
                };
                
                animate();
            },

            addBlueprintLighting() {
                // Luz spotlight focada no blueprint
                const spotlight = new THREE.SpotLight(0x00ff88, 2, 100, Math.PI / 6, 0.5, 2);
                spotlight.position.set(0, 15, 5);
                spotlight.target.position.set(0, 2.5, 0);
                spotlight.castShadow = true;
                spotlight.shadow.mapSize.width = 2048;
                spotlight.shadow.mapSize.height = 2048;
                spotlight.name = 'blueprint-spotlight';
                
                AppState.scene.add(spotlight);
                AppState.scene.add(spotlight.target);
                
                // Luzes de acento coloridas
                const accentLights = [
                    { color: 0xff4757, position: [-8, 5, 3] },
                    { color: 0x3742fa, position: [8, 5, 3] },
                    { color: 0xffa502, position: [0, 5, -8] }
                ];
                
                accentLights.forEach((light, index) => {
                    const pointLight = new THREE.PointLight(light.color, 0.8, 20);
                    pointLight.position.set(...light.position);
                    pointLight.name = `accent-light-${index}`;
                    AppState.scene.add(pointLight);
                });
            },

            addCameraOrbit() {
                // Vari√°veis de controle da √≥rbita
                let angle = 0;
                let isOrbiting = true;
                let orbitAnimationId = null;
                
                const radius = 12;
                const centerY = 8;
                const speed = 0.3;
                
                // Armazenar refer√™ncia para poder parar depois
                AppState.cameraOrbit = {
                    isActive: true,
                    stop: () => {
                        isOrbiting = false;
                        if (orbitAnimationId) {
                            cancelAnimationFrame(orbitAnimationId);
                        }
                        // Reativar controles do usu√°rio
                        AppState.controls.enabled = true;
                        console.log('√ìrbita da c√¢mera parada - controles reativados');
                    }
                };
                
                // Desabilitar controles durante √≥rbita autom√°tica
                AppState.controls.enabled = false;
                
                const orbit = () => {
                    if (!isOrbiting) return;
                    
                    angle += speed * 0.01;
                    
                    const x = Math.cos(angle) * radius;
                    const z = Math.sin(angle) * radius;
                    
                    AppState.camera.position.x = x;
                    AppState.camera.position.z = z;
                    AppState.camera.position.y = centerY + Math.sin(angle * 0.5) * 2;
                    
                    AppState.camera.lookAt(0, 2.5, 0);
                    AppState.controls.target.set(0, 2.5, 0);
                    
                    // Parar automaticamente ap√≥s 10 segundos (4œÄ radianos)
                    if (angle < Math.PI * 4 && isOrbiting) {
                        orbitAnimationId = requestAnimationFrame(orbit);
                    } else {
                        // Parar e reativar controles
                        AppState.cameraOrbit.stop();
                    }
                };
                
                // Come√ßar √≥rbita ap√≥s 1 segundo
                setTimeout(() => {
                    if (isOrbiting) {
                        console.log('Iniciando √≥rbita da c√¢mera - clique e arraste para parar');
                        this.showOrbitHint();
                        orbit();
                    }
                }, 1000);
                
                // Permitir que o usu√°rio pare a √≥rbita clicando e arrastando
                const stopOrbitOnInteraction = () => {
                    if (AppState.cameraOrbit && AppState.cameraOrbit.isActive) {
                        AppState.cameraOrbit.stop();
                        this.hideOrbitHint();
                        // Remover listeners ap√≥s usar
                        AppState.renderer.domElement.removeEventListener('mousedown', stopOrbitOnInteraction);
                        AppState.renderer.domElement.removeEventListener('touchstart', stopOrbitOnInteraction);
                    }
                };
                
                // Adicionar listeners para parar √≥rbita
                AppState.renderer.domElement.addEventListener('mousedown', stopOrbitOnInteraction);
                AppState.renderer.domElement.addEventListener('touchstart', stopOrbitOnInteraction);
            },

            showOrbitHint() {
                const hint = document.createElement('div');
                hint.id = 'orbit-hint';
                hint.style.cssText = `
                    position: fixed;
                    bottom: 30px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(0, 255, 136, 0.9);
                    color: #000;
                    padding: 1rem 2rem;
                    border-radius: 25px;
                    font-size: 1rem;
                    font-weight: bold;
                    z-index: 150;
                    animation: fadeIn 0.5s ease;
                    border: 2px solid #00ff88;
                    box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
                    text-align: center;
                `;
                hint.innerHTML = `
                    üé• Visualiza√ß√£o Autom√°tica Ativa<br>
                    <span style="font-size: 0.9rem; opacity: 0.8;">Clique e arraste para retomar controle</span>
                `;
                
                document.body.appendChild(hint);
                
                // Auto-remover ap√≥s 8 segundos
                setTimeout(() => {
                    this.hideOrbitHint();
                }, 8000);
            },

            hideOrbitHint() {
                const hint = document.getElementById('orbit-hint');
                if (hint) {
                    hint.style.opacity = '0';
                    hint.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => {
                        if (hint.parentNode) {
                            hint.parentNode.removeChild(hint);
                        }
                    }, 500);
                }
            },

            create3DProjectStructure() {
                // Limpar objetos anteriores do blueprint
                const existingBlueprint = AppState.scene.getObjectByName('project-blueprint');
                if (existingBlueprint) {
                    AppState.scene.remove(existingBlueprint);
                }

                const blueprintGroup = new THREE.Group();
                blueprintGroup.name = 'project-blueprint';

                // Criar base hologr√°fica para o blueprint
                this.createBlueprintBase(blueprintGroup);

                // Estrutura melhorada de pastas em 3D com informa√ß√µes detalhadas
                const folderStructure = [
                    { 
                        name: 'app/', 
                        position: [-4, 4, 0], 
                        color: 0x00ff88, 
                        type: 'folder', 
                        size: [2, 1.5, 2],
                        description: 'C√ìDIGO PRINCIPAL',
                        function: 'Cont√©m toda a l√≥gica da aplica√ß√£o Dash',
                        importance: 'Essencial - Cora√ß√£o do projeto'
                    },
                    { 
                        name: 'data/', 
                        position: [0, 4, 0], 
                        color: 0xff4757, 
                        type: 'folder', 
                        size: [2, 1.5, 2],
                        description: 'DADOS DO PROJETO',
                        function: 'Armazena datasets e arquivos de dados',
                        importance: 'Cr√≠tico - Base para visualiza√ß√µes'
                    },
                    { 
                        name: 'utils/', 
                        position: [4, 4, 0], 
                        color: 0x3742fa, 
                        type: 'folder', 
                        size: [2, 1.5, 2],
                        description: 'UTILIT√ÅRIOS',
                        function: 'Fun√ß√µes auxiliares e helpers',
                        importance: 'Suporte - Facilita desenvolvimento'
                    },
                    { 
                        name: 'tests/', 
                        position: [-4, 1.5, 0], 
                        color: 0xffa502, 
                        type: 'folder', 
                        size: [2, 1.5, 2],
                        description: 'TESTES',
                        function: 'Testes automatizados da aplica√ß√£o',
                        importance: 'Qualidade - Garante funcionamento'
                    },
                    { 
                        name: 'main.py', 
                        position: [0, 1.5, 0], 
                        color: 0x2ed573, 
                        type: 'file', 
                        size: [1.5, 2, 0.5],
                        description: 'ARQUIVO PRINCIPAL',
                        function: 'Ponto de entrada da aplica√ß√£o',
                        importance: 'Fundamental - Inicia toda aplica√ß√£o'
                    },
                    { 
                        name: 'pyproject.toml', 
                        position: [4, 1.5, 0], 
                        color: 0xff6348, 
                        type: 'file', 
                        size: [1.5, 2, 0.5],
                        description: 'CONFIGURA√á√ÉO',
                        function: 'Define depend√™ncias e configura√ß√µes',
                        importance: 'Configura√ß√£o - Padr√£o moderno Python'
                    }
                ];

                console.log('Criando estrutura 3D melhorada do projeto...');

                folderStructure.forEach((item, index) => {
                    try {
                        // Criar geometria com tamanhos personalizados
                        const geometry = new THREE.BoxGeometry(...item.size);
                        
                        // Material com efeitos hologr√°ficos melhorados
                        const material = new THREE.MeshPhongMaterial({
                            color: item.color,
                            transparent: true,
                            opacity: 0.7,
                            emissive: item.color,
                            emissiveIntensity: 0.15,
                            shininess: 100,
                            specular: 0x666666,
                            wireframe: false
                        });

                        const mesh = new THREE.Mesh(geometry, material);
                        mesh.position.set(...item.position);
                        mesh.userData = { 
                            name: item.name, 
                            type: item.type, 
                            originalColor: item.color,
                            projectInfo: {
                                name: item.name,
                                description: item.description,
                                function: item.function,
                                importance: item.importance
                            }
                        };
                        mesh.name = `blueprint-item-${index}`;
                        mesh.castShadow = true;
                        mesh.receiveShadow = true;
                        
                        // Adicionar borda wireframe
                        const wireframe = new THREE.WireframeGeometry(geometry);
                        const wireframeMaterial = new THREE.LineBasicMaterial({ 
                            color: item.color, 
                            transparent: true, 
                            opacity: 0.8,
                            linewidth: 2
                        });
                        const wireframeMesh = new THREE.LineSegments(wireframe, wireframeMaterial);
                        mesh.add(wireframeMesh);
                        
                        blueprintGroup.add(mesh);

                        // Criar label 3D melhorado
                        this.createImprovedLabel(item, index, blueprintGroup);

                        // Adicionar part√≠culas ao redor dos objetos
                        this.createParticleEffect(item, blueprintGroup);

                        console.log(`Criado item melhorado: ${item.name} em posi√ß√£o`, item.position);
                    } catch (error) {
                        console.error(`Erro ao criar item ${item.name}:`, error);
                    }
                });

                // Adicionar conex√µes entre elementos
                this.createConnections(blueprintGroup);

                AppState.scene.add(blueprintGroup);
                console.log('Blueprint 3D melhorado adicionado √† cena');

                // Sistema de hover para informa√ß√µes detalhadas
                this.setupHoverSystem();

                // Animar entrada dos objetos
                this.animateBlueprintEntrance(blueprintGroup);

                // Configurar intera√ß√£o com raycasting
                this.setupBlueprintInteraction();
            },

            createBlueprintBase(group) {
                // Base hologr√°fica circular
                const baseGeometry = new THREE.CylinderGeometry(7, 7, 0.2, 32);
                const baseMaterial = new THREE.MeshPhongMaterial({
                    color: 0x00ff88,
                    transparent: true,
                    opacity: 0.2,
                    emissive: 0x00ff88,
                    emissiveIntensity: 0.1
                });
                const base = new THREE.Mesh(baseGeometry, baseMaterial);
                base.position.y = -0.2;
                group.add(base);

                // An√©is hologr√°ficos
                for (let i = 1; i <= 3; i++) {
                    const ringGeometry = new THREE.RingGeometry(2 * i, 2 * i + 0.1, 32);
                    const ringMaterial = new THREE.MeshBasicMaterial({
                        color: 0x00ff88,
                        transparent: true,
                        opacity: 0.3 / i,
                        side: THREE.DoubleSide
                    });
                    const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                    ring.rotation.x = -Math.PI / 2;
                    ring.position.y = 0.1;
                    group.add(ring);
                }
            },

            setupHoverSystem() {
                // Criar painel de informa√ß√µes
                const infoPanel = document.createElement('div');
                infoPanel.id = 'hover-info-panel';
                infoPanel.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, rgba(0, 255, 136, 0.95), rgba(0, 200, 255, 0.95));
                    color: #000;
                    padding: 20px;
                    border-radius: 15px;
                    border: 3px solid #00ff88;
                    font-family: Arial, sans-serif;
                    font-size: 16px;
                    max-width: 450px;
                    z-index: 1000;
                    display: none;
                    box-shadow: 0 0 25px rgba(0, 255, 136, 0.6);
                    backdrop-filter: blur(10px);
                `;
                document.body.appendChild(infoPanel);

                // Sistema de raycasting para hover
                const raycaster = new THREE.Raycaster();
                const mouse = new THREE.Vector2();
                
                const onMouseMove = (event) => {
                    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                    
                    raycaster.setFromCamera(mouse, this.camera);
                    const intersects = raycaster.intersectObjects(AppState.scene.children, true);
                    
                    let foundInfo = false;
                    for (let intersect of intersects) {
                        const object = intersect.object;
                        if (object.userData && object.userData.projectInfo) {
                            const info = object.userData.projectInfo;
                            infoPanel.innerHTML = `
                                <div style="border-bottom: 2px solid #000; margin-bottom: 15px; padding-bottom: 10px;">
                                    <h3 style="margin: 0; font-size: 24px; color: #000;">${info.name}</h3>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #004d2a;">üìÇ Tipo:</strong><br>
                                    <span style="font-size: 18px;">${info.description}</span>
                                </div>
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #004d2a;">‚öôÔ∏è Fun√ß√£o:</strong><br>
                                    <span style="font-size: 16px;">${info.function}</span>
                                </div>
                                <div>
                                    <strong style="color: #004d2a;">‚≠ê Import√¢ncia:</strong><br>
                                    <span style="font-size: 16px; font-weight: bold;">${info.importance}</span>
                                </div>
                            `;
                            infoPanel.style.display = 'block';
                            foundInfo = true;
                            break;
                        }
                    }
                    
                    if (!foundInfo) {
                        infoPanel.style.display = 'none';
                    }
                };
                
                window.addEventListener('mousemove', onMouseMove);
                
                // Instru√ß√£o para o usu√°rio
                const instructionPanel = document.createElement('div');
                instructionPanel.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 20px;
                    background: rgba(0, 255, 136, 0.9);
                    color: #000;
                    padding: 15px;
                    border-radius: 10px;
                    border: 2px solid #00ff88;
                    font-family: Arial, sans-serif;
                    font-size: 16px;
                    font-weight: bold;
                    z-index: 1000;
                    box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
                `;
                instructionPanel.innerHTML = 'üîç Passe o mouse sobre os blocos para ver detalhes!';
                document.body.appendChild(instructionPanel);
                
                // Remover instru√ß√£o ap√≥s alguns segundos
                setTimeout(() => {
                    instructionPanel.style.opacity = '0';
                    instructionPanel.style.transition = 'opacity 2s';
                    setTimeout(() => instructionPanel.remove(), 2000);
                }, 5000);
            },

            createImprovedLabel(item, index, group) {
                // Canvas para texto 3D melhorado
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = 640;
                canvas.height = 160;
                
                // Gradiente de fundo
                const gradient = context.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, 'rgba(0, 255, 136, 0.95)');
                gradient.addColorStop(1, 'rgba(0, 200, 255, 0.95)');
                
                // Fundo com gradiente
                context.fillStyle = gradient;
                context.fillRect(10, 10, canvas.width - 20, canvas.height - 20);
                
                // Borda
                context.strokeStyle = '#00ff88';
                context.lineWidth = 6;
                context.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);
                
                // Texto principal (nome do arquivo/pasta)
                context.fillStyle = '#000';
                context.font = 'bold 42px Arial';
                context.textAlign = 'center';
                context.fillText(item.name, canvas.width / 2, 60);
                
                // Subt√≠tulo com descri√ß√£o
                context.font = 'bold 28px Arial';
                let description = '';
                if (item.type === 'folder') {
                    if (item.name === 'app') description = 'C√ìDIGO PRINCIPAL';
                    else if (item.name === 'data') description = 'DADOS DO PROJETO';
                    else if (item.name === 'utils') description = 'UTILIT√ÅRIOS';
                    else if (item.name === 'tests') description = 'TESTES';
                    else if (item.name === 'static') description = 'ARQUIVOS EST√ÅTICOS';
                    else description = 'PASTA';
                } else {
                    if (item.name === 'main.py') description = 'ARQUIVO PRINCIPAL';
                    else if (item.name === 'models.py') description = 'MODELOS DE DADOS';
                    else if (item.name === 'views.py') description = 'VISUALIZA√á√ïES';
                    else if (item.name === 'routers.py') description = 'ROTAS';
                    else if (item.name === 'pyproject.toml') description = 'CONFIGURA√á√ÉO';
                    else if (item.name === '__init__.py') description = 'M√ìDULO PYTHON';
                    else description = 'ARQUIVO';
                }
                context.fillText(description, canvas.width / 2, 110);
                
                // Sombra para melhor visibilidade
                context.shadowColor = '#000';
                context.shadowBlur = 8;
                context.shadowOffsetX = 2;
                context.shadowOffsetY = 2;

                const texture = new THREE.CanvasTexture(canvas);
                const spriteMaterial = new THREE.SpriteMaterial({ 
                    map: texture,
                    transparent: true,
                    alphaTest: 0.1
                });
                const sprite = new THREE.Sprite(spriteMaterial);
                
                // Posicionamento melhorado - abaixo dos objetos com mais dist√¢ncia
                const labelY = item.type === 'folder' ? item.position[1] - 4.5 : item.position[1] - 5;
                sprite.position.set(item.position[0], labelY, item.position[2]);
                sprite.scale.set(4.5, 1.125, 1); // Maior para melhor visibilidade
                sprite.name = `blueprint-label-${index}`;
                
                // Sempre virado para a c√¢mera
                sprite.lookAt = function() {
                    this.lookAt(AppState.scene.camera.position);
                };
                
                group.add(sprite);
            },

            createParticleEffect(item, group) {
                // Part√≠culas flutuantes ao redor dos objetos
                const particleCount = 20;
                const particles = new THREE.BufferGeometry();
                const positions = new Float32Array(particleCount * 3);
                
                for (let i = 0; i < particleCount; i++) {
                    positions[i * 3] = item.position[0] + (Math.random() - 0.5) * 4;
                    positions[i * 3 + 1] = item.position[1] + (Math.random() - 0.5) * 4;
                    positions[i * 3 + 2] = item.position[2] + (Math.random() - 0.5) * 4;
                }
                
                particles.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                
                const particleMaterial = new THREE.PointsMaterial({
                    color: item.color,
                    size: 0.1,
                    transparent: true,
                    opacity: 0.6,
                    blending: THREE.AdditiveBlending
                });
                
                const particleSystem = new THREE.Points(particles, particleMaterial);
                particleSystem.name = `particles-${item.name}`;
                group.add(particleSystem);
            },

            createConnections(group) {
                // Conex√µes hologr√°ficas entre elementos relacionados
                const connections = [
                    { from: [-4, 4, 0], to: [0, 1.5, 0] }, // app -> main.py
                    { from: [0, 4, 0], to: [0, 1.5, 0] },  // data -> main.py
                    { from: [4, 4, 0], to: [0, 1.5, 0] },  // utils -> main.py
                    { from: [0, 1.5, 0], to: [4, 1.5, 0] } // main.py -> pyproject.toml
                ];
                
                connections.forEach((conn, index) => {
                    const points = [
                        new THREE.Vector3(...conn.from),
                        new THREE.Vector3(...conn.to)
                    ];
                    
                    const geometry = new THREE.BufferGeometry().setFromPoints(points);
                    const material = new THREE.LineBasicMaterial({
                        color: 0x00ccff,
                        transparent: true,
                        opacity: 0.4,
                        linewidth: 2
                    });
                    
                    const line = new THREE.Line(geometry, material);
                    line.name = `connection-${index}`;
                    group.add(line);
                });
            },

            animateBlueprintEntrance(blueprintGroup) {
                // Animar entrada dos objetos com efeitos melhorados
                blueprintGroup.children.forEach((child, index) => {
                    if (child.name && child.name.startsWith('blueprint-item-')) {
                        // Posi√ß√£o inicial (caindo do c√©u)
                        const originalY = child.position.y;
                        child.position.y = originalY + 10;
                        child.scale.set(0, 0, 0);
                        child.material.opacity = 0;
                        
                        // Animar com delay e efeitos
                        setTimeout(() => {
                            const startTime = Date.now();
                            const duration = 1200;
                            
                            const animate = () => {
                                const elapsed = Date.now() - startTime;
                                const progress = Math.min(elapsed / duration, 1);
                                
                                // Easing functions diferentes para Y e escala
                                const bounceProgress = this.easeOutBounce(progress);
                                const scaleProgress = this.easeOutElastic(progress);
                                
                                // Anima√ß√£o Y (queda com bounce)
                                child.position.y = (originalY + 10) + (originalY - (originalY + 10)) * bounceProgress;
                                
                                // Anima√ß√£o escala (elastic)
                                child.scale.set(scaleProgress, scaleProgress, scaleProgress);
                                
                                // Fade in
                                child.material.opacity = progress * 0.7;
                                
                                // Rota√ß√£o durante entrada
                                child.rotation.y = (1 - progress) * Math.PI * 2;
                                
                                if (progress < 1) {
                                    requestAnimationFrame(animate);
                                } else {
                                    // Adicionar rota√ß√£o idle
                                    this.addIdleAnimation(child);
                                }
                            };
                            
                            animate();
                        }, index * 300);
                    }
                    
                    // Animar part√≠culas
                    if (child.name && child.name.startsWith('particles-')) {
                        this.animateParticles(child);
                    }
                });
            },

            easeOutBounce(t) {
                if (t < 1/2.75) {
                    return 7.5625 * t * t;
                } else if (t < 2/2.75) {
                    return 7.5625 * (t -= 1.5/2.75) * t + 0.75;
                } else if (t < 2.5/2.75) {
                    return 7.5625 * (t -= 2.25/2.75) * t + 0.9375;
                } else {
                    return 7.5625 * (t -= 2.625/2.75) * t + 0.984375;
                }
            },

            easeOutElastic(t) {
                if (t === 0) return 0;
                if (t === 1) return 1;
                const p = 0.3;
                const s = p / 4;
                return Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;
            },

            addIdleAnimation(object) {
                // Anima√ß√£o de idle mais suave (flutua√ß√£o menor)
                const startY = object.position.y;
                const startTime = Date.now();
                const floatAmount = 0.1; // Reduzido de 0.2 para 0.1
                const speed = 0.001; // Reduzido de 0.002 para 0.001
                
                const animate = () => {
                    const time = (Date.now() - startTime) * speed;
                    object.position.y = startY + Math.sin(time) * floatAmount;
                    object.rotation.y += 0.002; // Reduzido de 0.005 para 0.002
                    
                    requestAnimationFrame(animate);
                };
                
                animate();
            },

            animateParticles(particleSystem) {
                const startTime = Date.now();
                
                const animate = () => {
                    const time = (Date.now() - startTime) * 0.001;
                    const positions = particleSystem.geometry.attributes.position.array;
                    
                    for (let i = 0; i < positions.length; i += 3) {
                        positions[i + 1] += Math.sin(time + i) * 0.01; // Y movement
                        positions[i] += Math.cos(time + i) * 0.005;     // X movement
                    }
                    
                    particleSystem.geometry.attributes.position.needsUpdate = true;
                    particleSystem.rotation.y += 0.01;
                    
                    requestAnimationFrame(animate);
                };
                
                animate();
            },

            setupBlueprintInteraction() {
                const raycaster = new THREE.Raycaster();
                const mouse = new THREE.Vector2();

                // Remover listener anterior se existir
                if (this.blueprintClickHandler) {
                    AppState.renderer.domElement.removeEventListener('click', this.blueprintClickHandler);
                }
                if (this.blueprintMoveHandler) {
                    AppState.renderer.domElement.removeEventListener('mousemove', this.blueprintMoveHandler);
                }

                // Click handler
                this.blueprintClickHandler = (event) => {
                    const rect = AppState.renderer.domElement.getBoundingClientRect();
                    mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                    mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

                    raycaster.setFromCamera(mouse, AppState.camera);
                    
                    const blueprint = AppState.scene.getObjectByName('project-blueprint');
                    if (!blueprint) return;

                    const meshes = blueprint.children.filter(child => 
                        child.name && child.name.startsWith('blueprint-item-')
                    );
                    
                    const intersects = raycaster.intersectObjects(meshes);

                    if (intersects.length > 0) {
                        const clickedObject = intersects[0].object;
                        this.showItemDescription(clickedObject.userData);
                        this.animateClickEffect(clickedObject);
                    }
                };

                // Hover handler
                this.blueprintMoveHandler = (event) => {
                    const rect = AppState.renderer.domElement.getBoundingClientRect();
                    mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                    mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

                    raycaster.setFromCamera(mouse, AppState.camera);
                    
                    const blueprint = AppState.scene.getObjectByName('project-blueprint');
                    if (!blueprint) return;

                    const meshes = blueprint.children.filter(child => 
                        child.name && child.name.startsWith('blueprint-item-')
                    );
                    
                    const intersects = raycaster.intersectObjects(meshes);

                    // Reset all objects
                    meshes.forEach(mesh => {
                        mesh.material.emissiveIntensity = 0.15;
                        mesh.scale.set(1, 1, 1);
                        AppState.renderer.domElement.style.cursor = 'default';
                    });

                    // Highlight hovered object
                    if (intersects.length > 0) {
                        const hoveredObject = intersects[0].object;
                        hoveredObject.material.emissiveIntensity = 0.4;
                        hoveredObject.scale.set(1.1, 1.1, 1.1);
                        AppState.renderer.domElement.style.cursor = 'pointer';
                    }
                };

                AppState.renderer.domElement.addEventListener('click', this.blueprintClickHandler);
                AppState.renderer.domElement.addEventListener('mousemove', this.blueprintMoveHandler);
                console.log('Intera√ß√£o blueprint melhorada configurada');
            },

            animateClickEffect(object) {
                const originalScale = { x: object.scale.x, y: object.scale.y, z: object.scale.z };
                const startTime = Date.now();
                const duration = 300;
                
                const animate = () => {
                    const elapsed = Date.now() - startTime;
                    const progress = elapsed / duration;
                    
                    if (progress < 0.5) {
                        // Expandir
                        const scale = 1 + (progress * 0.4);
                        object.scale.set(scale, scale, scale);
                    } else {
                        // Contrair
                        const scale = 1.2 - ((progress - 0.5) * 0.4);
                        object.scale.set(scale, scale, scale);
                    }
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        object.scale.set(originalScale.x, originalScale.y, originalScale.z);
                    }
                };
                
                animate();
            },

            showItemDescription(item) {
                if (!item || !item.name) {
                    console.log('Item inv√°lido para mostrar descri√ß√£o');
                    return;
                }

                const descriptions = {
                    'app/': 'üìÅ Pasta principal do c√≥digo da aplica√ß√£o. Cont√©m modelos, rotas, views e arquivos est√°ticos.',
                    'data/': 'üìä Pasta para datasets e arquivos de dados. Aqui ficar√° nosso Heart Disease Dataset.',
                    'utils/': 'üõ†Ô∏è Fun√ß√µes utilit√°rias e helpers que podem ser reutilizados em diferentes partes do projeto.',
                    'tests/': 'üß™ Testes automatizados para garantir a qualidade do c√≥digo.',
                    'main.py': 'üöÄ Ponto de entrada da aplica√ß√£o. Arquivo principal que inicia o servidor Dash.',
                    'pyproject.toml': '‚öôÔ∏è Arquivo de configura√ß√£o do projeto com depend√™ncias e metadados.'
                };

                const description = descriptions[item.name] || 'üìÑ Componente do projeto.';
                
                // Remover painel anterior se existir
                const existingPanel = document.getElementById('blueprint-description');
                if (existingPanel) {
                    existingPanel.remove();
                }
                
                // Mostrar descri√ß√£o em um mini-painel
                const miniPanel = document.createElement('div');
                miniPanel.id = 'blueprint-description';
                miniPanel.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 20px;
                    background: rgba(0, 255, 136, 0.95);
                    color: #000;
                    padding: 1rem;
                    border-radius: 8px;
                    max-width: 350px;
                    font-size: 0.9rem;
                    z-index: 200;
                    animation: fadeIn 0.3s ease;
                    box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
                    border: 2px solid #00ff88;
                    font-family: 'Segoe UI', sans-serif;
                `;
                miniPanel.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 0.5rem; font-size: 1rem;">
                        ${item.name}
                    </div>
                    <div>${description}</div>
                    <div style="text-align: right; margin-top: 0.5rem; font-size: 0.8rem; opacity: 0.7;">
                        Clique em outros elementos para explorar
                    </div>
                `;
                
                document.body.appendChild(miniPanel);
                
                // Auto-remover ap√≥s 4 segundos
                setTimeout(() => {
                    if (miniPanel.parentNode) {
                        miniPanel.style.opacity = '0';
                        miniPanel.style.transition = 'opacity 0.3s ease';
                        setTimeout(() => {
                            if (miniPanel.parentNode) {
                                miniPanel.parentNode.removeChild(miniPanel);
                            }
                        }, 300);
                    }
                }, 4000);

                console.log(`Mostrando descri√ß√£o para: ${item.name}`);
            },

            showUpcomingModules() {
                UISystem.showPanel(
                    'Pr√≥ximos M√≥dulos',
                    `
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üöÄ</div>
                            <p><strong>Jornada de Desenvolvimento</strong></p>
                        </div>
                        <p>Aqui est√£o os pr√≥ximos m√≥dulos que implementaremos:</p>
                        <ul>
                            <li><strong>M√≥dulo 2:</strong> N√∫cleo do Servidor (<code>app = Dash(__name__)</code>)</li>
                            <li><strong>M√≥dulo 3:</strong> Estrutura do Layout (dash_html_components)</li>
                            <li><strong>M√≥dulo 4:</strong> Primeira Visualiza√ß√£o (dash_core_components + Plotly)</li>
                            <li><strong>M√≥dulo 5:</strong> Interatividade (callbacks)</li>
                            <li><strong>M√≥dulo 6:</strong> Melhorias com Mantine (dash-mantine-components)</li>
                            <li><strong>M√≥dulo 7:</strong> Refinamento (dash-chart-editor)</li>
                            <li><strong>Projeto Final:</strong> Dashboard Completo</li>
                        </ul>
                        <div style="background: rgba(0,255,136,0.1); padding: 1rem; border-radius: 5px; margin-top: 1rem;">
                            <p><em>üéØ Cada m√≥dulo adiciona uma nova funcionalidade ao dashboard e uma nova pe√ßa √† arquitetura 3D!</em></p>
                        </div>
                    `,
                    [
                        { label: 'Explorar Ambiente', callback: () => UISystem.hidePanel() },
                        { label: 'Come√ßar M√≥dulo 2', callback: () => this.showComingSoon() }
                    ]
                );
            },

            showComingSoon() {
                UISystem.showPanel(
                    'Em Desenvolvimento',
                    `
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö°</div>
                            <p><strong>M√≥dulos 2+ em Desenvolvimento</strong></p>
                            <p>Os pr√≥ximos m√≥dulos est√£o sendo preparados e estar√£o dispon√≠veis em breve!</p>
                            <p>Por enquanto, explore o ambiente 3D e familiarize-se com a estrutura do projeto.</p>
                        </div>
                    `,
                    [
                        { label: 'Fechar', callback: () => UISystem.hidePanel() }
                    ]
                );
            }
        };

        // Fun√ß√£o principal de inicializa√ß√£o
        async function initializeApplication() {
            try {
                LoadingSystem.updateProgress(0, 'Inicializando sistema...');
                
                // Aguardar um pouco para mostrar a tela de carregamento
                await new Promise(resolve => setTimeout(resolve, 500));

                // Inicializar Three.js
                await ThreeJSSystem.init();

                // Inicializar Pyodide (pode falhar, mas continuamos)
                await PyodideSystem.init();

                // Marcar como inicializado
                AppState.isInitialized = true;
                LoadingSystem.updateProgress(5, 'Inicializa√ß√£o completa!');

                // Aguardar um pouco antes de ocultar loading
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Ocultar tela de carregamento
                LoadingSystem.hide();

                // Aguardar a transi√ß√£o terminar e mostrar primeiro m√≥dulo
                setTimeout(() => {
                    ModuleSystem.startFirstModule();
                }, 1500);

            } catch (error) {
                console.error('Erro durante inicializa√ß√£o:', error);
                LoadingSystem.updateProgress(5, 'Erro na inicializa√ß√£o, mas continuando...');
                
                // Mesmo com erro, tentar continuar
                setTimeout(() => {
                    LoadingSystem.hide();
                    setTimeout(() => {
                        UISystem.showPanel(
                            'Erro de Inicializa√ß√£o',
                            '<p>Houve um problema durante a inicializa√ß√£o, mas o ambiente b√°sico est√° funcionando.</p>',
                            [{
                                label: 'Continuar Mesmo Assim',
                                callback: () => ModuleSystem.startFirstModule()
                            }]
                        );
                    }, 1500);
                }, 2000);
            }
        }

        // Fun√ß√µes globais para intera√ß√£o
        function nextStep() {
            ModuleSystem.nextStep();
        }

        function nextModule() {
            ModuleSystem.nextModule();
        }

        function load3DBlueprint() {
            ModuleSystem.load3DBlueprint();
        }

        // Configurar AutoTranslate quando a p√°gina carregar
        function setupTranslation() {
            // Detectar idioma do navegador
            const userLang = navigator.language || navigator.userLanguage;
            console.log('Idioma detectado:', userLang);
            
            // AutoTranslate.js ser√° configurado aqui quando estiver totalmente carregado
            // Por enquanto, mantemos o conte√∫do em portugu√™s
        }

        // Inicializar aplica√ß√£o quando a p√°gina carregar
        window.addEventListener('load', () => {
            setupTranslation();
            initializeApplication();
        });

        // Limpar recursos quando a p√°gina for fechada
        window.addEventListener('beforeunload', () => {
            if (AppState.animationId) {
                cancelAnimationFrame(AppState.animationId);
            }
        });
    </script>
</body>
</html>
